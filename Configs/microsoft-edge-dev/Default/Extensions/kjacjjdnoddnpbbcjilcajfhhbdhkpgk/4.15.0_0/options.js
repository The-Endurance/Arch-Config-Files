(()=>{var xe=Object.create,oe=Object.defineProperty,we=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty,Te=Object.getOwnPropertyNames,Be=Object.getOwnPropertyDescriptor;var Ie=d=>oe(d,"__esModule",{value:!0});var ke=(d,u)=>()=>(u||d((u={exports:{}}).exports,u),u.exports);var Ce=(d,u,x)=>{if(u&&typeof u=="object"||typeof u=="function")for(let w of Te(u))!be.call(d,w)&&w!=="default"&&oe(d,w,{get:()=>u[w],enumerable:!(x=Be(u,w))||x.enumerable});return d},le=d=>Ce(Ie(oe(d!=null?xe(we(d)):{},"default",d&&d.__esModule&&"default"in d?{get:()=>d.default,enumerable:!0}:{value:d,enumerable:!0})),d);var ne=ke((de,ue)=>{(function(d,u){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],u);else if(typeof de!="undefined")u(ue);else{var x={exports:{}};u(x),d.browser=x.exports}})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:de,function(d){"use strict";if(typeof browser=="undefined"||Object.getPrototypeOf(browser)!==Object.prototype){let u="The message port closed before a response was received.",x="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",w=B=>{let R={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(R).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class M extends WeakMap{constructor(p,f=void 0){super(f);this.createItem=p}get(p){return this.has(p)||this.set(p,this.createItem(p)),super.get(p)}}let J=g=>g&&typeof g=="object"&&typeof g.then=="function",X=(g,p)=>(...f)=>{B.runtime.lastError?g.reject(B.runtime.lastError):p.singleCallbackArg||f.length<=1&&p.singleCallbackArg!==!1?g.resolve(f[0]):g.resolve(f)},D=g=>g==1?"argument":"arguments",z=(g,p)=>function(E,...s){if(s.length<p.minArgs)throw new Error(`Expected at least ${p.minArgs} ${D(p.minArgs)} for ${g}(), got ${s.length}`);if(s.length>p.maxArgs)throw new Error(`Expected at most ${p.maxArgs} ${D(p.maxArgs)} for ${g}(), got ${s.length}`);return new Promise((t,o)=>{if(p.fallbackToNoCallback)try{E[g](...s,X({resolve:t,reject:o},p))}catch(e){console.warn(`${g} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,e),E[g](...s),p.fallbackToNoCallback=!1,p.noCallback=!0,t()}else p.noCallback?(E[g](...s),t()):E[g](...s,X({resolve:t,reject:o},p))})},ae=(g,p,f)=>new Proxy(p,{apply(E,s,t){return f.call(s,g,...t)}}),S=Function.call.bind(Object.prototype.hasOwnProperty),$=(g,p={},f={})=>{let E=Object.create(null),s={has(o,e){return e in g||e in E},get(o,e,i){if(e in E)return E[e];if(!(e in g))return;let c=g[e];if(typeof c=="function")if(typeof p[e]=="function")c=ae(g,g[e],p[e]);else if(S(f,e)){let _=z(e,f[e]);c=ae(g,g[e],_)}else c=c.bind(g);else if(typeof c=="object"&&c!==null&&(S(p,e)||S(f,e)))c=$(c,p[e],f[e]);else if(S(f,"*"))c=$(c,p[e],f["*"]);else return Object.defineProperty(E,e,{configurable:!0,enumerable:!0,get(){return g[e]},set(_){g[e]=_}}),c;return E[e]=c,c},set(o,e,i,c){return e in E?E[e]=i:g[e]=i,!0},defineProperty(o,e,i){return Reflect.defineProperty(E,e,i)},deleteProperty(o,e){return Reflect.deleteProperty(E,e)}},t=Object.create(g);return new Proxy(t,s)},P=g=>({addListener(p,f,...E){p.addListener(g.get(f),...E)},hasListener(p,f){return p.hasListener(g.get(f))},removeListener(p,f){p.removeListener(g.get(f))}}),Z=!1,Q=new M(g=>typeof g!="function"?g:function(f,E,s){let t=!1,o,e=new Promise(h=>{o=function(n){Z||(console.warn(x,new Error().stack),Z=!0),t=!0,h(n)}}),i;try{i=g(f,E,o)}catch(h){i=Promise.reject(h)}let c=i!==!0&&J(i);if(i!==!0&&!c&&!t)return!1;let _=h=>{h.then(n=>{s(n)},n=>{let r;n&&(n instanceof Error||typeof n.message=="string")?r=n.message:r="An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:r})}).catch(n=>{console.error("Failed to send onMessage rejected reply",n)})};return _(c?i:e),!0}),ie=({reject:g,resolve:p},f)=>{B.runtime.lastError?B.runtime.lastError.message===u?p():g(B.runtime.lastError):f&&f.__mozWebExtensionPolyfillReject__?g(new Error(f.message)):p(f)},ee=(g,p,f,...E)=>{if(E.length<p.minArgs)throw new Error(`Expected at least ${p.minArgs} ${D(p.minArgs)} for ${g}(), got ${E.length}`);if(E.length>p.maxArgs)throw new Error(`Expected at most ${p.maxArgs} ${D(p.maxArgs)} for ${g}(), got ${E.length}`);return new Promise((s,t)=>{let o=ie.bind(null,{resolve:s,reject:t});E.push(o),f.sendMessage(...E)})},re={runtime:{onMessage:P(Q),onMessageExternal:P(Q),sendMessage:ee.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:ee.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},k={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return R.privacy={network:{"*":k},services:{"*":k},websites:{"*":k}},$(B,re,R)};if(typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");d.exports=w(chrome)}else d.exports=browser})});var a=le(ne());var _e=le(ne()),l=(d,u)=>d.classList.add(u),m=(d,u)=>d.classList.remove(u),K=(d,u)=>d.classList.contains(u),A=(d,u)=>document.getElementById(d).textContent=u,he=d=>d.search(/en/g)!==-1?"en":d.search(/tw/i)?"tc":"en",fe=d=>{(d||window.document).querySelectorAll("[intl-id]").forEach(w=>w.textContent=_e.default.i18n.getMessage(w.getAttribute("intl-id")))};var ce="UPDATE_SETTINGS_UI";var ye="UPDATE_POPUP_MODE_SWITCHER",ge="UPDATE_OPTIONS_MODE_SWITCHER";var Ee=d=>({type:ye,payload:d});var me={READY:"ready",GROWING:"growing",GROWN:"grown",FAILED:"failed"};var Ae=le(ne()),pe=[...Array(8)].map((d,u)=>({tag_id:u,title:Ae.default.i18n.getMessage(`plant_tag_${u}`)}));var F=[{id:0,name:"Cedar",prefix:"tree_default",type:"TREE",special_childhood:[],has_seven:!0,product_id:-1},{id:1,name:"Flower Tree",prefix:"flower_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:1},{id:2,name:"Tree House",prefix:"tree_house",type:"TREE",special_childhood:[],has_seven:!0,product_id:2},{id:3,name:"Nest",prefix:"bird_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:3},{id:4,name:"Lemon Tree",prefix:"lemon_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:6},{id:5,name:"Triplets",prefix:"castle_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:7},{id:6,name:"Bush",prefix:"flower_bush",type:"BUSH",special_childhood:[],has_seven:!1,product_id:-1},{id:7,name:"Octopus",prefix:"octopus",type:"TREE",special_childhood:[],has_seven:!0,product_id:10},{id:8,name:"Cherry Blossom",prefix:"cherry_blossom",type:"TREE",special_childhood:[],has_seven:!0,product_id:11},{id:9,name:"Coconut Tree",prefix:"coconut_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:12},{id:10,name:"Cat Tree",prefix:"cat_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:13},{id:11,name:"Grass",prefix:"grass",type:"BUSH",special_childhood:[],has_seven:!1,product_id:14},{id:12,name:"Pine Tree",prefix:"pine_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:15},{id:13,name:"Cactus Ball",prefix:"cactus_ball",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:16},{id:14,name:"Pumpkin",prefix:"pumpkin",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:22},{id:15,name:"Scarecrow",prefix:"scarecrow",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:23},{id:18,name:"Mushroom",prefix:"mushroom",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:24},{id:19,name:"Big Cactus",prefix:"big_cactus",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:25},{id:20,name:"Ginkgo Tree",prefix:"ginkgo",type:"TREE",special_childhood:[],has_seven:!0,product_id:27},{id:21,name:"Wisteria Tree",prefix:"wisteria_tree",type:"TREE",special_childhood:[],has_seven:!0,product_id:28},{id:22,name:"Watermelon",prefix:"watermelon",type:"BUSH",special_childhood:[2],has_seven:!1,product_id:29},{id:23,name:"Bamboo",prefix:"bamboo",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:30},{id:24,name:"Candy Tree",prefix:"candy_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:31},{id:25,name:"SunFlower",prefix:"sunflower",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:32},{id:26,name:"Rose",prefix:"rose",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:33},{id:27,name:"Maple",prefix:"maple",type:"TREE",special_childhood:[],has_seven:!0,product_id:34},{id:28,name:"BaobabTree",prefix:"baobab_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:35},{id:29,name:"Raffelesia",prefix:"rafflesia",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:36},{id:30,name:"Banana Tree",prefix:"banana_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:37},{id:31,name:"New Year Bamboo",prefix:"new_year_bamboo",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:38},{id:32,name:"Earth Tree",prefix:"earth_tree",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:39},{id:33,name:"Carnation",prefix:"Carnation",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:40},{id:34,name:"Apple Tree",prefix:"apple_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:41},{id:35,name:"Star Tree",prefix:"star_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:42},{id:36,name:"Time Tree",prefix:"time_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:43},{id:37,name:"Moon Tree",prefix:"moon_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:44},{id:38,name:"Rainbow Flower",prefix:"rainbow_flower",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:45},{id:39,name:"Ghost Mushroom",prefix:"ghost_mushroom",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:46},{id:40,name:"Blue Mail Tree",prefix:"mail_tree_blue",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:47},{id:41,name:"Green Mail Tree",prefix:"mail_tree_green",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:48},{id:42,name:"Pink Mail Tree",prefix:"mail_tree_pink",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:49},{id:43,name:"Yellow Mail Tree",prefix:"mail_tree_yellow",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:50},{id:44,name:"Purple Mail Tree",prefix:"mail_tree_purple",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:51},{id:45,name:"Cattail Willow",prefix:"cattail_willow",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:52},{id:46,name:"Clear Note Flower",prefix:"clear_note_flower",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:53},{id:47,name:"Coral",prefix:"coral",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:54},{id:48,name:"Cake Flower Chocolate",prefix:"cake_flower_chocolate",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:62},{id:49,name:"Cake Flower Cheese",prefix:"cake_flower_cheese",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:63},{id:50,name:"Cake Flower Tiramisu",prefix:"cake_flower_tiramisu",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:64},{id:51,name:"Cake Flower Matcha",prefix:"cake_flower_matcha",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:65},{id:52,name:"Cake Flower Lemon",prefix:"cake_flower_lemon",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:66},{id:53,name:"Cake Flower Black",prefix:"cake_flower_black",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:67},{id:54,name:"Cake Flower Blueberry",prefix:"cake_flower_blueberry",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:68},{id:55,name:"Cake Flower Strawberry",prefix:"cake_flower_strawberry",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:69},{id:56,name:"Birthday2019CakeTree",prefix:"cake_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:55},{id:57,name:"Dog Tree",prefix:"dog_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:56},{id:58,name:"Bear Paw",prefix:"bear_paw",type:"BUSH",special_childhood:[1,2],has_seven:!1,product_id:57},{id:59,name:"Starburst Bush",prefix:"starburst_bush",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:59},{id:60,name:"Unicorn Tree",prefix:"unicorn_tree",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:60},{id:61,name:"Space Tree",prefix:"space_tree",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:61},{id:62,name:"Celestial Tree",prefix:"celestial_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:81},{id:63,name:"Weepingwillow Tree",prefix:"weepingwillow_tree",type:"TREE",special_childhood:[1,2],has_seven:!0,product_id:82},{id:64,name:"Clover",prefix:"clover",type:"TREE",special_childhood:[1,2],has_seven:!1,product_id:84},{id:65,name:"Eco Tree",prefix:"eco_tree",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:66,name:"Birthday 2020 tree",prefix:"birthday_2020_tree",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:67,name:"Water Spirit",prefix:"water_spirit",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:68,name:"Sundae Tree",prefix:"sundae_tree",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:69,name:"Lover Tree",prefix:"lover_tree",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:70,name:"Pear tree house",prefix:"pear_tree_house",type:"TREE",special_childhood:[1,2],has_seven:!0},{id:71,name:"Witch Mushroom",prefix:"witch_mushroom",type:"TREE",special_childhood:[1,2],has_seven:!0},{id:72,name:"Lily Flower",prefix:"lily_flower",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:73,name:"Twilight Guardian",prefix:"twilight_guardian",type:"TREE",special_childhood:[1,2],has_seven:!0},{id:74,name:"Tulip",prefix:"tulip",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:75,name:"Plum Blossom",prefix:"plum_blossom",type:"TREE",special_childhood:[1,2],has_seven:!0},{id:76,name:"Camellia",prefix:"camellia",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:77,name:"Luminie",prefix:"luminie",type:"TREE",special_childhood:[1,2],has_seven:!0},{id:78,name:"Birthday 2021",prefix:"birthday_2021_tree",type:"TREE",special_childhood:[1,2],has_seven:!0},{id:79,name:"Lavender",prefix:"lavender",type:"TREE",special_childhood:[1,2],has_seven:!0},{id:80,name:"Rice",prefix:"rice",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:81,name:"Tada Statue",prefix:"statue_of_tada",type:"TREE",special_childhood:[1,2],has_seven:!1},{id:-1,name:"dummy",prefix:"dummy",product_id:-1}];(function(){"use strict";var d,u=a.default.extension.getBackgroundPage(),x=!1,w=0,B=!1,R=0;let M=0,J=(s,t,[o,e])=>{s==="right"?M+=1:M-=1,M+1===t.length-3?l(e,"hidden"):M===0?l(o,"hidden"):(m(o,"hidden"),m(e,"hidden")),t.forEach(i=>i.style.transform=`translateX(-${M*135}px)`)};var X=async()=>{var s=document.getElementById("edit-tag").value,t=document.getElementById("edit-note").value;let o=await a.default.storage.local.get({grownTree:null,tempTag:null,tempNote:null});var e=o.grownTree,i=e.find(v=>v.browserTreeID==R);if(o.tempTag!=s||o.tempNote!=t){typeof i.plant.id!="undefined"&&i.plant.id!=null&&(i.syncState="WaitForSync");var c=d.findIndex(v=>v.title==s);if(i.plant.tag=parseInt(d[c].tag_id),i.plant.note=t,e!=null&&e.length!=0){var _=new Date(0),h=0;for(var n in e){var r=e[n].plant,y=new Date(r.end_time);y>_&&(_=y,h=r.tag)}u.saveLastTreeTagId(h)}}await a.default.storage.local.set({grownTree:e}),R=0,window.setTimeout(()=>l(document.getElementById("edit-popup"),"disappear"),300),l(document.getElementById("edit-popup"),"edit-popup-shrink"),window.setTimeout(()=>l(document.getElementById("edit-mask"),"disappear"),300),k()},D=async s=>{let t=await a.default.storage.local.get({grownTree:null});R=s;var o=t.grownTree,e=o.find(function(r){return r.browserTreeID==s}),i=e.plant.tag,c=e.plant.note,_=document.getElementById("edit-tag"),h=d.findIndex(function(r){return r.tag_id==parseInt(i)});h==-1&&(h=0),_.selectedIndex=h;var n=document.getElementById("edit-note");n.value=c},z=function(s){for(var t=document.getElementById("edit-tag");t.options.length>0;)t.remove(0);s()},ae=function(s,t){var o=0,e=0;for(var i in s)(s[i].syncState=="Fail"||s[i].syncState=="WaitForSync"||s[i].syncState=="EditFail")&&e++,i==s.length-1&&(e==0?t(!0):t(!1))},S=function(s){var t=[],o;switch(s){case"blacklist":o=document.getElementById("blacklist").children;break;case"whitelist":o=document.getElementById("whitelist").children;break;default:}for(var e in o){var i=o[e];if(typeof i.id!="undefined"&&!i.id.startsWith("new")){var c=i.children;for(var _ in c)if(c[_].nodeName==="SPAN"){t.push(c[_].textContent);break}}}switch(s){case"blacklist":u.setBlacklist(t),a.default.storage.local.set({blackList:t});break;case"whitelist":u.setWhitelist(t),a.default.storage.local.set({whiteList:t});break;default:}},$=function(s){var t=new Date,o=new Date;o.setDate(t.getDate()-1);for(var e in s)if(s[e].length!=0){var i=new Date(s[e][0].plant.end_time),c=document.createElement("DIV");c.className="tree-day";var _=document.createElement("DIV");_.className="tree-date";var h=document.createElement("DIV");h.className="date-title",t.toDateString()==i.toDateString()?h.textContent=a.default.i18n.getMessage("settings_today"):o.toDateString()==i.toDateString()?h.textContent=a.default.i18n.getMessage("settings_yesterday"):h.textContent+=i.toLocaleString(navigator.language,{weekday:"long"});var n=document.createElement("DIV");n.className="date-day",n.textContent+=i.toLocaleString(navigator.language,{month:"long"})+" "+i.getDate(),_.appendChild(h),_.appendChild(n),c.appendChild(_);var r=document.createElement("UL");r.className="tree-daylist";var y=s[e];for(var v in y){var b=y[v].plant.trees[0].tree_type,I=y[v].plant.trees[y[v].plant.trees.length-1].phase,L=new Date(y[v].plant.start_time),te=new Date(y[v].plant.end_time),N=document.createElement("LI");N.className="tree";var O=document.createElement("IMG"),q=y[v].plant.tag;if(I<3&&F[b].special_childhood!==void 0)F[b].special_childhood.includes(parseInt(I))?O.src=`./images/trees/tree1/tree_default_${I}.png`:O.src=`./images/trees/tree${F[b].id+1}/${F[b].prefix}_${I}.png`;else{let{id:W,prefix:se,has_seven:ve}=F[b];I==8?O.src=`./images/trees/tree${W+1}/${se}_dead.png`:O.src=`./images/trees/tree${W+1}/${se}_${ve?I:"4"}.png`}N.appendChild(O);var U=document.createElement("DIV");U.className="tree-info";var G=document.createElement("DIV");G.className="tree-tag";var j=d.findIndex(function(W){return W.tag_id==q});j==-1&&(j=0),G.textContent+=d[j].title;var V=document.createElement("DIV");V.textContent+=L.toLocaleTimeString("en",{hour12:!1,hour:"2-digit",minute:"2-digit"})+" - "+te.toLocaleTimeString("en",{hour12:!1,hour:"2-digit",minute:"2-digit"}),V.textContent+=" ( "+Math.round((te.getTime()-L.getTime())/6e4)+" mins ) ",U.appendChild(G),U.appendChild(V);var H=document.createElement("DIV");H.className="note",H.id=y[v].browserTreeID,H.textContent+=y[v].plant.note,U.appendChild(H);var Y=document.createElement("DIV");Y.className="tree-status";var C=document.createElement("I"),T=document.createElement("SPAN");switch(T.className="tooltiptext",y[v].syncState){case"Success":C.className="tooltip fa fa-check",T.textContent=a.default.i18n.getMessage("settings_status_200");break;case"Fail":C.className="tooltip fa fa-exclamation-triangle",y[v].failedStatus=="0"?T.textContent=a.default.i18n.getMessage("settings_status_0"):y[v].failedStatus=="403"?T.textContent=a.default.i18n.getMessage("settings_status_403"):T.textContent=a.default.i18n.getMessage("settings_status_fail");break;case"EditFail":C.className="tooltip fa fa-exclamation-triangle",y[v].failedStatus=="0"?T.textContent=a.default.i18n.getMessage("settings_status_0"):y[v].failedStatus=="403"?T.textContent=a.default.i18n.getMessage("settings_status_403"):T.textContent=a.default.i18n.getMessage("settings_status_fail");break;case"WaitForSync":C.className="tooltip fa fa-refresh",T.textContent=a.default.i18n.getMessage("settings_status_waitforsync");break}C.appendChild(T),C.setAttribute("style","font-size:20px;"),Y.appendChild(C),N.appendChild(U),N.appendChild(Y),r.appendChild(N)}c.appendChild(r),document.getElementById("tree-container").appendChild(c)}},P=function(s,t){var o,e;switch(s){case"blacklist":o=document.getElementById("blacklist"),e=document.getElementById("new-black");break;case"whitelist":o=document.getElementById("whitelist"),e=document.getElementById("new-white");break;default:}var i=document.createElement("LI"),c=document.createElement("IMG");c.src="images/settings/delete.png",c.className="x buttons",c.alt="X",i.appendChild(c);let _=document.createElement("IMG");_.className="favicon",_.src=`http://${t}/favicon.ico`,i.appendChild(_),_.addEventListener("error",()=>_.src="images/settings/defaultFavicon.png");var h=document.createElement("SPAN");h.textContent=t,i.appendChild(h),o.insertBefore(i,e.nextElementSibling)},Z=function(){var s=document.getElementById("new-black-box"),t=s.value.trim();t.length>=0&&(P("blacklist",t),S("blacklist")),s.value=""},Q=function(){var s=document.getElementById("new-white-box"),t=s.value.trim();t.length>=0&&(P("whitelist",t),S("whitelist")),s.value=""},ie=s=>{var t=s.target,o=document.getElementById("blacklist"),e=document.getElementById("whitelist");t.id=="blacklist-toggle"?(l(e,"disappear"),m(o,"disappear"),l(document.getElementById("settings-whitelist-description"),"disappear"),m(document.getElementById("settings-blacklist-description"),"disappear")):t.id=="whitelist-toggle"&&(l(o,"disappear"),m(e,"disappear"),m(document.getElementById("settings-whitelist-description"),"disappear"),l(document.getElementById("settings-blacklist-description"),"disappear"));var i=t.id==="whitelist-toggle";u.setWhitelistMode(i),a.default.storage.local.set({isWhitelistMode:i}),a.default.runtime.sendMessage(Ee(i?"white":"black")).catch(()=>{})};let ee=()=>{let s=u.getIsWhitelistMode(),t=document.getElementById("blacklist"),o=document.getElementById("whitelist"),e=document.querySelector("#whitelist-toggle"),i=document.querySelector("#blacklist-toggle");s?(e.checked=!0,l(t,"disappear"),m(o,"disappear"),m(document.getElementById("settings-whitelist-description"),"disappear"),l(document.getElementById("settings-blacklist-description"),"disappear")):(i.checked=!0,l(o,"disappear"),m(t,"disappear"),l(document.getElementById("settings-whitelist-description"),"disappear"),m(document.getElementById("settings-blacklist-description"),"disappear"))};async function re(){let s=await a.default.storage.local.get({blackList:u.getDefaultBlacklist(),whiteList:u.getDefaultWhitelist(),isWhitelistMode:!1});var t=s.blackList,o=document.getElementById("blacklist"),e;for(e=o.children;o.lastChild.id!=="new-black";)o.removeChild(o.lastChild);for(var i in t)P("blacklist",t[t.length-i-1]);var c=s.whiteList,_=document.getElementById("whitelist");for(e=_.children;_.lastChild.id!=="new-white";)_.removeChild(_.lastChild);for(var h in c)P("whitelist",c[c.length-h-1])}async function k(){let s=await a.default.storage.local.get({user:null,grownTree:null});var t=s.grownTree,o=document.getElementById("tree-container"),e;for(e=o.children;o.lastChild.id!=="list-head";)o.removeChild(o.lastChild);var i=new Date().getDate(),c=new Array;c[0]=new Array;var _=0;if(s.grownTree!=null&&s.grownTree.length!=0){l(document.getElementById("synclist-no-tree"),"disappear"),m(document.getElementById("synclist-limit"),"disappear"),l(document.getElementById("no-sync-btn"),"disappear"),l(document.getElementById("sync-btn"),"disappear"),s.user!=null?m(document.getElementById("sync-btn"),"disappear"):m(document.getElementById("no-sync-btn"),"disappear");for(var h in t){var n=new Date(t[h].plant.end_time);n.getDate()!=i&&(_++,i=n.getDate(),c[_]=new Array),c[_].push(t[h])}$(c)}else l(document.getElementById("no-sync-btn"),"disappear"),l(document.getElementById("sync-btn"),"disappear"),m(document.getElementById("synclist-no-tree"),"disappear"),l(document.getElementById("synclist-limit"),"disappear");g()}async function g(){let s=await a.default.storage.local.get({user:null});if(s.user!=null){var t=new XMLHttpRequest,o="https://c88fef96.forestapp.cc/api/v1/users/"+s.user.user_id+"/profile";t.open("GET",o,!0),t.setRequestHeader("Content-type","application/json; charset=utf-8"),t.onreadystatechange=async()=>{if(t.readyState==4&&t.status==200){var e=JSON.parse(t.responseText);await a.default.storage.local.set({profile:e});var i=document.getElementById("profile-avatar"),c=document.getElementById("tab-info-avatar");e.avatar_url==null?(i.src="images/settings/empty_avatar.png",c.src="images/settings/empty_avatar.png"):(i.src=e.avatar_url,c.src=e.avatar_url);var _=document.getElementById("profile-name");_.textContent=e.name;var h=document.getElementById("profile-healthy");h.textContent=e.health_count;var n=document.getElementById("profile-rate"),r=e.health_count+e.death_count>0?Math.round(e.health_count/(e.health_count+e.death_count)*100):0;n.textContent=r+"%";var y=document.getElementById("tab-info-name");y.textContent=e.name,p()}},t.send()}}async function p(){let s=await a.default.storage.local.get({user:null});if(s.user!=null){var t=new XMLHttpRequest,o="https://c88fef96.forestapp.cc/api/v1/users/"+s.user.id+"/coin?authenticate_token="+s.user.remember_token;t.open("GET",o,!0),t.setRequestHeader("Content-type","application/json; charset=utf-8"),t.onreadystatechange=async()=>{if(t.readyState==4&&t.status==200){var e=JSON.parse(t.responseText);await a.default.storage.local.set({coin:e.coin});var i=document.getElementById("profile-coin");i.textContent=e.coin}},t.send()}}function f(s){z(async()=>{let t=await a.default.storage.local.get({user:null});var o=document.getElementById("edit-tag"),e;if(t.user!=null){var i=new XMLHttpRequest,c="https://c88fef96.forestapp.cc/api/v1/tags?authenticate_token="+t.user.remember_token;i.open("GET",c,!0),i.setRequestHeader("Content-type","application/json; charset=utf-8"),i.onreadystatechange=()=>{if(i.readyState==4){if(i.status==200){var _=JSON.parse(i.responseText),h=_.tags;d=new Array,d.push({tag_id:0,title:a.default.i18n.getMessage("plant_tag_0")});for(var n in h)if(h[n].deleted!=!0){var r=new Object;h[n].tag_id!=0&&h[n].tag_id!="0"&&(r.tag_id=h[n].tag_id,r.title=h[n].title,d.push(r))}(d==null||d.length==1)&&(d=pe);for(var n in d)e=document.createElement("OPTION"),e.value=d[n].title,e.textContent=d[n].title,o.appendChild(e);a.default.storage.local.set({tag:d})}s()}},i.send()}})}function E(){m(document.getElementById("login-loading"),"disappear"),l(document.getElementById("login-message"),"disappear");var s=new XMLHttpRequest;s.open("POST","https://c88fef96.forestapp.cc/api/v1/sessions",!0);var t=document.getElementById("login-email-input").value;t=t.replace("\\b",""),t=t.trim();var o=JSON.stringify({email:t,password:document.getElementById("login-password-input").value});s.setRequestHeader("Access-Control-Allow-Origin","*"),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.onreadystatechange=async()=>{if(s.readyState==4)if(s.status==200){var e=JSON.parse(s.responseText);window.setTimeout(()=>l(document.getElementById("login-popup"),"disappear"),300),l(document.getElementById("login-popup"),"login-popup-shrink"),window.setTimeout(()=>{l(document.getElementById("login-mask"),"disappear"),l(document.getElementById("login-loading"),"disappear")},300),l(document.getElementById("info-no-login"),"disappear"),m(document.getElementById("info-has-login"),"disappear"),m(document.getElementById("tab-logout"),"disappear"),await a.default.storage.local.set({user:e}),u.updatePurchasedProducts(()=>{}),g(),f(()=>u.updateFromServer("login",()=>k()))}else m(document.getElementById("login-message"),"disappear"),l(document.getElementById("login-loading"),"disappear"),s.status==403?A("login-message",a.default.i18n.getMessage("settings_login_failed")):A("login-message",`${a.default.i18n.getMessage("settings_login_failed_error_code")} ${s.status}`)},s.send(o)}window.onload=()=>{let s=he(a.default.i18n.getUILanguage()),t=document.querySelector(".about-forest__carousel-images"),o=[...Array(9)].map((n,r)=>{let y=document.createElement("img");return y.src=`./images/screenshot/${s}/${r+1}.jpg`,y});o.forEach(n=>t.appendChild(n));let e=[document.querySelector("#carousel-left-arrow"),document.querySelector("#carousel-right-arrow")];z(async()=>{let n=await a.default.storage.local.get({tag:null,DefaultTAG:pe});var r=document.getElementById("edit-tag"),y;d=n.tag,d==null&&(d=n.DefaultTAG);for(var v in d)y=document.createElement("OPTION"),y.value=d[v].title,y.textContent=d[v].title,r.appendChild(y)}),window.addEventListener("scroll",async()=>{var n=window.scrollY,r;n<w?r=!1:r=!0,n>130&&r&&!x?(l(document.getElementById("tab"),"tab-fixed"),m(document.getElementById("tab-space"),"disappear"),(await a.default.storage.local.get({user:null})).user!=null&&m(document.getElementById("tab-info"),"transparent"),x=!0):n<130&&!r&&x&&(m(document.getElementById("tab"),"tab-fixed"),l(document.getElementById("tab-space"),"disappear"),(await a.default.storage.local.get({user:null})).user!=null&&l(document.getElementById("tab-info"),"transparent"),x=!1),w=n}),window.addEventListener("click",({target:n})=>{let{id:r}=n;if(K(n,"x")){var y=n.parentNode.parentNode.id;n.parentNode.parentNode.removeChild(n.parentNode),S(y)}if(K(n,"choose-mode")&&ie(event),K(n,"os")){var v="";r==="iphone"?v="https://itunes.apple.com/app/forest-stay-focused-stop-phubbing/id866450515?mt=8":r==="android"?v="https://play.google.com/store/apps/details?id=cc.forestapp":r==="windows"&&(v="https://www.microsoft.com/store/apps/9WZDNCRDNLJK"),a.default.tabs.create({url:v}),a.default.storage.local.get({user:null})}if((r=="login-link"||r=="no-sync-btn")&&(m(document.getElementById("login-popup"),"disappear"),window.setTimeout(()=>m(document.getElementById("login-popup"),"login-popup-shrink"),10),m(document.getElementById("login-mask"),"disappear"),window.setTimeout(()=>l(document.getElementById("login-mask"),"login-masked"),10)),(r=="login-cancel"||r=="login-mask")&&(window.setTimeout(()=>l(document.getElementById("login-popup"),"disappear"),300),l(document.getElementById("login-popup"),"login-popup-shrink"),window.setTimeout(()=>l(document.getElementById("login-mask"),"disappear"),300),m(document.getElementById("login-mask"),"login-masked"),l(document.getElementById("login-message"),"disappear"),l(document.getElementById("login-loading"),"disappear")),r=="login-btn"&&E(),r=="settings_sync_tree_species_manually"&&(l(document.getElementById("settings_sync_tree_species_manually_pre"),"disappear"),l(document.getElementById("settings_sync_tree_species_manually"),"disappear"),m(document.getElementById("settings_syncing_tree_species_manually"),"disappear"),u.updatePurchasedProducts(()=>{u.uploadTree("sync",()=>{}),window.setTimeout(()=>{m(document.getElementById("settings_sync_tree_species_manually_pre"),"disappear"),m(document.getElementById("settings_sync_tree_species_manually"),"disappear"),l(document.getElementById("settings_syncing_tree_species_manually"),"disappear")},1e3)})),r=="tab-logout"){var b=new XMLHttpRequest;b.open("DELETE","https://c88fef96.forestapp.cc/api/v1/sessions/signout",!0),(async()=>{var G=(await a.default.storage.local.get({user:null})).user,j=JSON.stringify(G);b.setRequestHeader("Content-type","application/json; charset=utf-8"),b.onreadystatechange=()=>{if(b.readyState==4&&b.status==200){a.default.storage.local.remove(["user","profile","coin"]),l(document.getElementById("tab-logout"),"disappear"),l(document.getElementById("info-has-login"),"disappear"),m(document.getElementById("info-no-login"),"disappear"),k(),u.updatePurchasedProducts(()=>{}),l(document.getElementById("tab-info"),"transparent"),l(document.getElementById("tab-space"),"disappear");var V=document.getElementById("profile-avatar");V.src="images/settings/empty_avatar.png";var H=document.getElementById("profile-name");H.textContent="";var Y=document.getElementById("profile-healthy");Y.textContent="";var C=document.getElementById("profile-rate");C.textContent="";var T=document.getElementById("tab-info-avatar");T.src="";var W=document.getElementById("tab-info-name");W.textContent="";var se=document.getElementById("profile-coin");se.textContent=""}},b.send(j)})()}if(r=="settings_no_account_iosapp",r=="settings_no_account_androidapp",r=="tab-settings"){l(n,"active");var I=document.getElementById("settings"),L=document.getElementById("synclist"),te=document.getElementById("tab-synclist");m(te,"active"),m(I,"disappear"),l(L,"disappear")}if(r=="tab-synclist"){k(),l(n,"active");var I=document.getElementById("settings"),L=document.getElementById("synclist"),N=document.getElementById("tab-settings");m(N,"active"),m(L,"disappear"),l(I,"disappear")}if((r=="sync-btn"||r=="sync-btn-title"||r=="sync-btn-icon")&&(B||(B=!0,l(document.getElementById("sync-btn-icon"),"icon-spin"),m(document.getElementById("sync-btn"),"buttons"),f(()=>{u.uploadTree("sync",()=>{l(document.getElementById("sync-btn"),"buttons"),k(),m(document.getElementById("sync-btn-icon"),"icon-spin"),l(document.getElementById("no-sync-btn"),"disappear"),B=!1})}))),K(n,"note")){var O=n,q=null,q=n.parentNode.querySelector(".tree-tag");if(q==null)return;(async()=>{await a.default.storage.local.set({tempTag:q.textContent,tempNote:O.textContent}),D(r),m(document.getElementById("edit-popup"),"disappear"),window.setTimeout(()=>m(document.getElementById("edit-popup"),"edit-popup-shrink"),10),m(document.getElementById("edit-mask"),"disappear"),window.setTimeout(()=>l(document.getElementById("edit-mask"),"edit-masked"),10)})()}(r=="edit-cancel"||r=="edit-mask")&&(window.setTimeout(function(){l(document.getElementById("edit-popup"),"disappear")},300),l(document.getElementById("edit-popup"),"edit-popup-shrink"),window.setTimeout(function(){l(document.getElementById("edit-mask"),"disappear")},300),m(document.getElementById("edit-mask"),"edit-masked")),r=="edit-btn"&&X(),r==="carousel-left-arrow"&&J("left",o,e),r==="carousel-right-arrow"&&J("right",o,e),r==="google-play-badge"&&window.open("https://play.google.com/store/apps/details?id=cc.forestapp&referrer=utm_source%3Dchromeextension%26utm_campaign%3Dnewchromeextension"),r==="app-store-badge"&&window.open("https://apps.apple.com/app/apple-store/id866450515?pt=690486&ct=new-chrome-extension&mt=8")},!1),window.addEventListener("contextmenu",n=>(n.preventDefault(),!1),!0),document.getElementById("new-black-box").addEventListener("keypress",n=>{n||(n=window.event);var r=n.keyCode||n.which;r===13&&(Z(),document.getElementById("new-black-box").blur())},!1),document.getElementById("new-white-box").addEventListener("keypress",n=>{n||(n=window.event);var r=n.keyCode||n.which;r===13&&(Q(),document.getElementById("new-white-box").blur())},!1),window.addEventListener("keypress",function(n){if(n.keyCode==13&&(n.target.id=="login-email-input"||n.target.id=="login-password-input"))return E(),!1},!1),re(),(async()=>{let n=await a.default.storage.local.get({user:null,isWhitelistMode:!1});var r=n.user;r!==null&&(window.setTimeout(()=>l(document.getElementById("login-popup"),"disappear"),300),l(document.getElementById("login-popup"),"login-popup-shrink"),window.setTimeout(()=>l(document.getElementById("login-mask"),"disappear"),300),m(document.getElementById("login-mask"),"login-masked"),l(document.getElementById("info-no-login"),"disappear"),m(document.getElementById("info-has-login"),"disappear"),l(document.getElementById("no-sync-btn"),"disappear"),m(document.getElementById("sync-btn"),"disappear"),m(document.getElementById("tab-logout"),"disappear"),u.updatePurchasedProducts(()=>{}),g()),n.isWhitelistMode?document.getElementById("whitelist-toggle").click():document.getElementById("blacklist-toggle").click()})(),A("settings_blacklist_title",a.default.i18n.getMessage("settings_blacklist_title")),A("settings_whitelist_title",a.default.i18n.getMessage("settings_whitelist_title")),document.getElementById("new-black-box").placeholder=a.default.i18n.getMessage("settings_newblackbox_placeholder"),document.getElementById("new-white-box").placeholder=a.default.i18n.getMessage("settings_newblackbox_placeholder"),A("login-link",a.default.i18n.getMessage("settings_login_portal")),A("settings_login_description",a.default.i18n.getMessage("settings_login_description")),A("settings_no_account1",a.default.i18n.getMessage("settings_no_account1")),A("settings_no_account_iosapp",a.default.i18n.getMessage("settings_no_account_iosapp")),A("settings_no_account_or",a.default.i18n.getMessage("settings_no_account_or")),A("settings_no_account_androidapp",a.default.i18n.getMessage("settings_no_account_androidapp")),A("settings_no_account2",a.default.i18n.getMessage("settings_no_account2")),A("login-title",a.default.i18n.getMessage("settings_login_title")),A("login-btn",a.default.i18n.getMessage("settings_login_btn")),A("login-cancel",a.default.i18n.getMessage("settings_login_cancel")),document.getElementById("login-email-input").placeholder=a.default.i18n.getMessage("settings_login_email"),document.getElementById("login-password-input").placeholder=a.default.i18n.getMessage("settings_login_password"),A("synclist-no-tree-description",a.default.i18n.getMessage("settings_synclist_no_tree")),A("synclist-no-tree-only-browser",a.default.i18n.getMessage("settings_only_browser")),A("synclist-limit-description",a.default.i18n.getMessage("settings_synclist_limit")),A("synclist-limit-only-browser",a.default.i18n.getMessage("settings_only_browser")),A("tab-settings",a.default.i18n.getMessage("settings_tab_settings")),A("tab-synclist",a.default.i18n.getMessage("settings_tab_synclist")),A("no-sync-btn",a.default.i18n.getMessage("settings_no_sync_btn")),A("sync-btn-title",a.default.i18n.getMessage("settings_sync_btn")),A("sync-btn-done",a.default.i18n.getMessage("settings_sync_completed")),A("tab-logout",a.default.i18n.getMessage("settings_tab_logout")),A("settings-whitelist-description",a.default.i18n.getMessage("settings_whitelist_description")),A("settings-blacklist-description",a.default.i18n.getMessage("settings_blacklist_description")),A("edit-btn",a.default.i18n.getMessage("settings_edit_btn")),A("edit-cancel",a.default.i18n.getMessage("settings_edit_cancel")),fe();let i=document.querySelector(".switch-mode-container"),c=document.querySelector(".section-edit-url"),_=document.querySelector(".choose-background"),h=({type:n,payload:r})=>{switch(n){case ce:r===me.GROWING?(l(i,"unavailable"),l(c,"unavailable"),l(_,"unavailable")):(m(i,"unavailable"),m(c,"unavailable"),m(_,"unavailable"));break;case ge:ee();break;default:break}return Promise.resolve("")};a.default.runtime.onMessage.addListener(h),u.currentState!==me.GROWING&&(m(i,"unavailable"),m(c,"unavailable"),m(_,"unavailable"))}})();})();
